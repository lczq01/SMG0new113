# 学生管理系统 - 原子步骤执行文档

## 项目概述
本项目是一个面向教师和学生的管理系统，采用静态网页 + 数据文件的架构。学生端为纯静态网页，从JSON文件获取数据；教师端为本地应用，可将数据导出为JSON文件供学生端使用。

## 技术栈
- 前端框架：React 18+ with TypeScript
- UI组件库：Ant Design (TypeScript版本)
- 构建工具：Vite
- Excel处理：SheetJS/xlsx库
- 路由管理：React Router DOM
- 状态管理：React Hooks (useState/useEffect)

## 执行步骤

### 初始化与配置阶段

#### 步骤1：初始化React + TypeScript + Vite项目
- **步骤ID**：T-init-001
- **步骤名称**：初始化React + TypeScript + Vite项目
- **步骤描述**：在当前目录初始化一个React + TypeScript + Vite项目
- **验证方法**：检查项目是否成功创建，查看package.json文件
- **AI指令**：使用npm create vite@latest命令在当前目录初始化一个React + TypeScript项目，使用模板react-ts

#### 步骤2：安装核心依赖
- **步骤ID**：T-init-002
- **步骤名称**：安装核心依赖
- **步骤描述**：安装React、React DOM、React Router DOM、Ant Design、@ant-design/icons等核心依赖
- **验证方法**：检查package.json文件中是否包含这些依赖
- **AI指令**：使用npm install命令安装react react-dom react-router-dom antd @ant-design/icons

#### 步骤3：安装开发依赖
- **步骤ID**：T-init-003
- **步骤名称**：安装开发依赖
- **步骤描述**：安装TypeScript、@types/react、@types/react-dom、@types/react-router-dom、Vite、@vitejs/plugin-react等开发依赖
- **验证方法**：检查package.json文件中是否包含这些开发依赖
- **AI指令**：使用npm install -D命令安装typescript @types/react @types/react-dom @types/react-router-dom vite @vitejs/plugin-react

#### 步骤4：安装Excel处理依赖
- **步骤ID**：T-init-004
- **步骤名称**：安装Excel处理依赖
- **步骤描述**：安装SheetJS/xlsx库用于Excel文件处理
- **验证方法**：检查package.json文件中是否包含xlsx依赖
- **AI指令**：使用npm install命令安装xlsx

#### 步骤5：配置vite.config.ts文件
- **步骤ID**：T-config-001
- **步骤名称**：配置vite.config.ts文件
- **步骤描述**：配置vite.config.ts文件，添加路径别名和构建配置
- **验证方法**：检查vite.config.ts文件是否正确配置
- **AI指令**：创建或修改vite.config.ts文件，添加resolve.alias配置和build配置

#### 步骤6：创建项目目录结构
- **步骤ID**：T-structure-001
- **步骤名称**：创建项目目录结构
- **步骤描述**：创建src/pages、src/components、src/services、src/types、src/utils、src/layouts等目录
- **验证方法**：检查目录结构是否正确创建
- **AI指令**：使用mkdir命令创建所需的目录结构

### 类型定义与数据服务阶段

#### 步骤7：创建类型定义文件
- **步骤ID**：T-types-001
- **步骤名称**：创建类型定义文件
- **步骤描述**：创建src/types/index.ts文件，定义Student、ExamRanking、Standard、Violation等类型
- **验证方法**：检查类型定义是否完整且符合需求
- **AI指令**：创建src/types/index.ts文件，根据需求文档定义所有数据类型

#### 步骤8：创建模拟数据文件
- **步骤ID**：T-mock-001
- **步骤名称**：创建模拟数据文件
- **步骤描述**：创建src/services/mockData.ts文件，提供学生、考试排名、标准设置、违规记录的模拟数据
- **验证方法**：检查模拟数据是否符合数据结构定义
- **AI指令**：创建src/services/mockData.ts文件，根据类型定义提供模拟数据

#### 步骤9：创建API服务文件
- **步骤ID**：T-api-001
- **步骤名称**：创建API服务文件
- **步骤描述**：创建src/services/api.ts文件，提供数据获取和操作的方法
- **验证方法**：检查API服务方法是否完整
- **AI指令**：创建src/services/api.ts文件，实现数据获取和操作的方法，使用模拟数据作为数据源

### 前端页面实现阶段

#### 步骤10：实现学生端登录页面
- **步骤ID**：T-frontend-001
- **步骤名称**：实现学生端登录页面
- **步骤描述**：创建src/pages/StudentLogin.tsx文件，实现学生登录功能
- **验证方法**：访问登录页面，输入测试账号，检查是否能成功登录
- **AI指令**：创建src/pages/StudentLogin.tsx文件，使用Ant Design组件实现登录表单，包含班级、姓名、学号输入字段，实现登录验证逻辑

#### 步骤11：实现学生端个人信息页面
- **步骤ID**：T-frontend-002
- **步骤名称**：实现学生端个人信息页面
- **步骤描述**：创建src/pages/StudentProfile.tsx文件，实现学生个人信息查看功能
- **验证方法**：登录后访问个人信息页面，检查是否能正确显示学生信息
- **AI指令**：创建src/pages/StudentProfile.tsx文件，使用Ant Design组件展示学生基本信息和各项标准

#### 步骤12：实现学生端违规情况页面
- **步骤ID**：T-frontend-003
- **步骤名称**：实现学生端违规情况页面
- **步骤描述**：创建src/pages/StudentViolation.tsx文件，实现学生违规情况查看功能
- **验证方法**：登录后访问违规情况页面，检查是否能正确显示违规记录
- **AI指令**：创建src/pages/StudentViolation.tsx文件，使用Ant Design组件展示违规记录，按时间倒序排列

#### 步骤13：实现学生端考试排名页面
- **步骤ID**：T-frontend-004
- **步骤名称**：实现学生端考试排名页面
- **步骤描述**：创建src/pages/StudentRanking.tsx文件，实现学生考试排名查看功能
- **验证方法**：登录后访问考试排名页面，检查是否能正确显示排名和进步情况
- **AI指令**：创建src/pages/StudentRanking.tsx文件，使用Ant Design组件展示考试排名，实现排名进步退步计算逻辑

#### 步骤14：实现教师端登录页面
- **步骤ID**：T-frontend-005
- **步骤名称**：实现教师端登录页面
- **步骤描述**：创建src/pages/TeacherLogin.tsx文件，实现教师登录功能
- **验证方法**：访问教师登录页面，输入测试账号，检查是否能成功登录
- **AI指令**：创建src/pages/TeacherLogin.tsx文件，使用Ant Design组件实现登录表单，包含用户名、密码输入字段，实现登录验证逻辑

#### 步骤15：实现教师端布局组件
- **步骤ID**：T-frontend-006
- **步骤名称**：实现教师端布局组件
- **步骤描述**：创建src/layouts/TeacherLayout.tsx文件，实现教师端统一的布局和导航
- **验证方法**：登录教师端后，检查布局和导航是否正确显示
- **AI指令**：创建src/layouts/TeacherLayout.tsx文件，使用Ant Design的Layout组件实现布局，包含侧边导航菜单

#### 步骤16：实现教师端班级管理页面
- **步骤ID**：T-frontend-007
- **步骤名称**：实现教师端班级管理页面
- **步骤描述**：创建src/pages/teacher/ClassManagement.tsx文件，实现班级的增删改查操作
- **验证方法**：登录教师端后，访问班级管理页面，检查是否能正确管理班级
- **AI指令**：创建src/pages/teacher/ClassManagement.tsx文件，使用Ant Design组件实现班级管理功能，包含班级列表、添加、编辑、删除操作

#### 步骤17：实现教师端学生信息管理页面
- **步骤ID**：T-frontend-008
- **步骤名称**：实现教师端学生信息管理页面
- **步骤描述**：创建src/pages/teacher/StudentManagement.tsx文件，实现学生信息的查看和管理
- **验证方法**：登录教师端后，访问学生信息管理页面，检查是否能正确管理学生信息
- **AI指令**：创建src/pages/teacher/StudentManagement.tsx文件，使用Ant Design组件实现学生信息管理功能，包含学生列表、编辑、删除、Excel导入操作

#### 步骤18：实现教师端考试排名管理页面
- **步骤ID**：T-frontend-009
- **步骤名称**：实现教师端考试排名管理页面
- **步骤描述**：创建src/pages/teacher/RankingManagement.tsx文件，实现考试排名的管理功能
- **验证方法**：登录教师端后，访问考试排名管理页面，检查是否能正确管理排名
- **AI指令**：创建src/pages/teacher/RankingManagement.tsx文件，使用Ant Design组件实现考试排名管理功能，包含Excel导入、矩阵式表格展示、排名进步情况分析

#### 步骤19：实现教师端学生标准查看页面
- **步骤ID**：T-frontend-010
- **步骤名称**：实现教师端学生标准查看页面
- **步骤描述**：创建src/pages/teacher/StandardView.tsx文件，实现学生标准的查看功能
- **验证方法**：登录教师端后，访问学生标准查看页面，检查是否能正确查看标准
- **AI指令**：创建src/pages/teacher/StandardView.tsx文件，使用Ant Design组件实现学生标准查看功能，包含按班级筛选、按学生搜索操作

#### 步骤20：实现教师端学生标准管理页面
- **步骤ID**：T-frontend-011
- **步骤名称**：实现教师端学生标准管理页面
- **步骤描述**：创建src/pages/teacher/StandardManagement.tsx文件，实现学生标准的管理功能，包括添加、修改、删除标准操作，为所有学生自动批量创建/更新/删除标准记录
- **验证方法**：登录教师端后，访问学生标准管理页面，检查是否能正确管理标准
- **AI指令**：创建src/pages/teacher/StandardManagement.tsx文件，使用Ant Design组件实现学生标准管理功能，包含添加新标准名称（为所有学生自动批量创建记录，默认值为3）、修改现有标准名称（批量更新所有学生记录）、删除标准名称（批量删除所有学生记录，包含确认对话框）

#### 步骤21：实现教师端学生违规情况管理页面
- **步骤ID**：T-frontend-012
- **步骤名称**：实现教师端学生违规情况管理页面
- **步骤描述**：创建src/pages/teacher/ViolationManagement.tsx文件，实现学生违规情况的管理功能
- **验证方法**：登录教师端后，访问学生违规情况管理页面，检查是否能正确管理违规记录
- **AI指令**：创建src/pages/teacher/ViolationManagement.tsx文件，使用Ant Design组件实现学生违规情况管理功能，包含按学生、班级、违规类型筛选操作

#### 步骤22：实现教师端预警管理页面
- **步骤ID**：T-frontend-013
- **步骤名称**：实现教师端预警管理页面
- **步骤描述**：创建src/pages/teacher/AlertManagement.tsx文件，实现学生预警信息的管理功能
- **验证方法**：登录教师端后，访问预警管理页面，检查是否能正确显示预警信息
- **AI指令**：创建src/pages/teacher/AlertManagement.tsx文件，使用Ant Design组件实现预警管理功能，包含按预警类型、班级筛选操作

#### 步骤23：实现教师端数据导出页面
- **步骤ID**：T-frontend-014
- **步骤名称**：实现教师端数据导出页面
- **步骤描述**：创建src/pages/teacher/DataExport.tsx文件，实现数据导出功能
- **验证方法**：登录教师端后，访问数据导出页面，检查是否能正确导出数据
- **AI指令**：创建src/pages/teacher/DataExport.tsx文件，使用Ant Design组件实现数据导出功能，包含一键导出完整数据包操作

#### 步骤24：实现教师端学生详情页面
- **步骤ID**：T-frontend-015
- **步骤名称**：实现教师端学生详情页面
- **步骤描述**：创建src/pages/teacher/StudentDetail.tsx文件，实现学生完整信息的查看和管理功能
- **验证方法**：登录教师端后，访问学生详情页面，检查是否能正确查看和管理学生信息
- **AI指令**：创建src/pages/teacher/StudentDetail.tsx文件，使用Ant Design组件实现学生详情功能，包含基本信息、考试排名、标准详情、违规记录管理

### 路由与应用配置阶段

#### 步骤25：配置路由
- **步骤ID**：T-config-002
- **步骤名称**：配置路由
- **步骤描述**：修改src/App.tsx文件，设置学生端和教师端的路由
- **验证方法**：检查路由配置是否正确，访问各页面是否能正确导航
- **AI指令**：修改src/App.tsx文件，使用React Router DOM配置路由，设置学生端和教师端的所有路由路径

#### 步骤26：创建主应用文件
- **步骤ID**：T-app-001
- **步骤名称**：创建主应用文件
- **步骤描述**：修改src/App.tsx文件，集成路由和全局配置
- **验证方法**：检查应用是否能正常启动和运行
- **AI指令**：修改src/App.tsx文件，集成路由配置，添加全局样式和Ant Design配置

### 测试与构建阶段

#### 步骤27：测试所有功能页面
- **步骤ID**：T-test-001
- **步骤名称**：测试所有功能页面
- **步骤描述**：启动开发服务器，测试所有功能页面是否正常运行
- **验证方法**：访问所有页面，检查功能是否正常
- **AI指令**：使用npm run dev命令启动开发服务器，访问所有页面进行测试

#### 步骤28：构建项目
- **步骤ID**：T-build-001
- **步骤名称**：构建项目
- **步骤描述**：构建项目，生成静态文件
- **验证方法**：检查构建是否成功，生成的静态文件是否正确
- **AI指令**：使用npm run build命令构建项目，生成静态文件

#### 步骤29：创建部署指南
- **步骤ID**：T-deploy-001
- **步骤名称**：创建部署指南
- **步骤描述**：创建部署指南，说明如何部署到Cloudflare Pages
- **验证方法**：检查部署指南是否完整和清晰
- **AI指令**：创建部署指南文档，包含部署到Cloudflare Pages的详细步骤

## 测试账号

### 学生账号
- **班级**：高一(1)班
- **姓名**：张三
- **学号**：2024001

### 教师账号
- **用户名**：teacher
- **密码**：teacher123

## 项目结构

```
src/
├── pages/
│   ├── StudentLogin.tsx
│   ├── StudentProfile.tsx
│   ├── StudentViolation.tsx
│   ├── StudentRanking.tsx
│   ├── TeacherLogin.tsx
│   └── teacher/
│       ├── ClassManagement.tsx
│       ├── StudentManagement.tsx
│       ├── RankingManagement.tsx
│       ├── StandardView.tsx
│       ├── StandardManagement.tsx
│       ├── ViolationManagement.tsx
│       ├── AlertManagement.tsx
│       ├── DataExport.tsx
│       └── StudentDetail.tsx
├── components/
│   ├── common/
│   └── teacher/
├── services/
│   ├── api.ts
│   └── mockData.ts
├── types/
│   └── index.ts
├── utils/
│   └── index.ts
├── layouts/
│   └── TeacherLayout.tsx
└── App.tsx
```

## 技术要点

1. **数据结构**：严格按照JSON数据结构定义实现
2. **排名计算**：实现最新考试排名与前两次考试最佳排名的比较
3. **预警逻辑**：实现连续退步、累计违规、一次退步+一次违规的预警
4. **Excel处理**：使用SheetJS/xlsx库实现Excel文件的导入导出
5. **路由管理**：使用React Router DOM实现前端路由
6. **状态管理**：使用React Hooks实现组件状态管理
7. **UI组件**：使用Ant Design组件库实现界面
8. **部署方式**：学生端通过Cloudflare Pages部署到公网

## 注意事项

1. **安全考虑**：教师端仅在本地使用，无需发布到外网
2. **性能优化**：实现数据懒加载，避免大数据量下的性能问题
3. **用户体验**：确保界面美观、易用，操作流畅
4. **代码质量**：遵循代码规范，确保代码可读性和可维护性
5. **测试覆盖**：确保所有功能都有充分的测试覆盖
